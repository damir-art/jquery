# Key Concepts
Правильное использование методов jQuery, связанных с Ajax, требует сначала понимания некоторых ключевых концепций.

## GET vs POST
Двумя наиболее распространенными "методами" отправки запроса на сервер являются GET и POST. Важно понимать правильное применение каждого из них.

Метод **GET** следует использовать для неразрушающих операций, то есть операций, при которых вы только "получаете" данные с сервера, а не изменяете данные на сервере. Например, запрос к службе поиска может быть запросом GET. Запросы GET могут кэшироваться браузером, что может привести к непредсказуемому поведению, если вы этого не ожидаете. Запросы GET обычно отправляют все свои данные в строке запроса.

Метод **POST** следует использовать для деструктивных операций, то есть операций, при которых вы меняете данные на сервере. Например, когда пользователь сохраняет сообщение в блоге, это должен быть запрос POST. Запросы POST обычно не кэшируются браузером; строка запроса может быть частью URL-адреса, но данные, как правило, отправляются отдельно в виде данных публикации.

## Data Types
jQuery обычно требует некоторых инструкций относительно типа данных, которые вы ожидаете получить в ответ на запрос Ajax; в некоторых случаях тип данных определяется именем метода, а в других случаях он предоставляется как часть объекта конфигурации. Есть несколько вариантов:

- `text`   - для передачи простых строк,
- `HTML`   - для передачи HTML-блоков, размещаемых на странице,
- `script` - для добавления нового скрипта на страницу,
- `json`   - для передачи данных в формате JSON, которые могут включать строки, массивы и объекты,
- `jsonp`  - для передачи JSON-данных из другого домена,
- `xml`    - для передачи данных в настраиваемой XML-схеме.

В большинстве случаев рассмотрите возможность использования формата JSON, так как он обеспечивает наибольшую гибкость. Это особенно полезно для одновременной отправки HTML и данных.

## A is for Asynchronous
Асинхронность Ajax застает многих новых пользователей jQuery врасплох. Поскольку вызовы Ajax по умолчанию являются асинхронными, ответ не может быть немедленно доступен. Ответы могут быть обработаны только с помощью обратного вызова. Так, например, следующий код не будет работать:

    var response;
    $.get( "foo.php", function( r ) {
      response = r;
    });
    console.log( response ); // undefined

Вместо этого нам нужно передать в функцию обратного вызова наш запрос; этот обратный вызов будет запущен, когда запрос будет успешным, и в этот момент мы сможем получить доступ к данным, которые он вернул, если они есть:

    $.get( "foo.php", function( response ) {
      console.log( response ); // server response
    });

В файл `foo.php` прописываем обычный текст или HTML-код, например `AJAX`.

Вставляем данные запроса после абзаца:

    let p = $("p");
    $.get( "foo.php", function( response ) {
      console.log( response ); // server response
      p.after( response ); // Вставляем данные запроса после абзаца
    });

## Same-Origin Policy and JSONP
Как правило, запросы Ajax ограничены тем же протоколом (http или https), тем же портом и тем же доменом, что и страница, отправляющая запрос. Это ограничение не распространяется на сценарии, которые загружаются с помощью методов Ajax jQuery.

Примечание. Версии Internet Explorer ниже 10 не поддерживают междоменные запросы AJAX.

Другим исключением являются запросы, направленные на службу JSONP в другом домене. В случае JSONP поставщик услуги согласился ответить на ваш запрос сценарием, который можно загрузить на страницу с помощью тега `<script>`, избегая таким образом ограничения на тот же источник; этот сценарий будет включать запрошенные вами данные, заключенные в предоставленную вами функцию обратного вызова.

## Ajax and Firebug
Firebug (или Webkit Inspector в Chrome или Safari) - бесценный инструмент для работы с Ajax-запросами. Вы можете видеть Ajax-запросы по мере их возникновения на вкладке "Консоль" Firebug (и на панели `Ресурсы > XHR Webkit Inspector`), и вы можете щелкнуть запрос, чтобы развернуть его и просмотреть такие подробности, как заголовки запроса, заголовки ответа, ответ содержание и многое другое. Если с Ajax-запросом что-то идет не так, как ожидалось, это первое место, куда нужно обратиться, чтобы отследить, что не так.
