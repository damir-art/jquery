# Ajax and Forms
Возможности jQuery AJAX могут быть особенно полезны при работе с формами. Есть несколько преимуществ, которые могут варьироваться от сериализации до простой проверки на стороне клиента (например, "Извините, это имя пользователя занято") до предварительных фильтров (объяснено ниже) и даже больше!

## Serialization
Сериализация входных данных формы в jQuery чрезвычайно проста. Два метода изначально поддерживаются: `.serialize()` и `.serializeArray()`. Хотя названия говорят сами за себя, их использование дает много преимуществ.

Метод `.serialize()` сериализует данные формы в строку запроса. Чтобы значение элемента было сериализовано, оно должно иметь атрибут `name`. Обратите внимание, что значения из входных данных с типом `checkbox` или `radio` включаются только в том случае, если они checked.

Пример:

    // Преобразование данных формы в строку запроса
    $( "#myForm" ).serialize();
    
    // Создает строку запроса следующим образом:
    // field_1=something&field2=somethingElse

Хотя старая добрая сериализация - это здорово, иногда ваше приложение будет работать лучше, если вы отправите массив объектов, а не только строку запроса. Для этого в jQuery есть метод `.serializeArray()`. Он очень похож на метод `.serialize()`, указанный выше, за исключением того, что он создает массив объектов вместо строки.

Пример:

    // Создание массива объектов, содержащих данные формы
    $( "#myForm" ).serializeArray();

    // Создает такую структуру:
    // [
    //   {
    //     name : "field_1",
    //     value : "something"
    //   },
    //   {
    //     name : "field_2",
    //     value : "somethingElse"
    //   }
    // ]

## Client-side validation
Проверка на стороне клиента, как и многие другие вещи, чрезвычайно проста с использованием jQuery. Хотя есть несколько случаев, которые разработчики могут проверить, некоторые из наиболее распространенных: наличие обязательного ввода, действительные имена пользователей/адреса электронной почты/номера телефонов/и т.д. или установка флажка "Я согласен...".

Обратите внимание, что рекомендуется также выполнять проверку входных данных на стороне сервера. Однако, как правило, для лучшего взаимодействия с пользователем можно проверить некоторые вещи, не отправляя форму.

С учетом сказанного, давайте перейдем к некоторым примерам! Во-первых, мы увидим, как легко проверить, что в обязательном поле ничего нет. Если нет, то мы вернем `return false` и предотвратим обработку формы.

    // Использование валидации для проверки наличия ввода
    $( "#form" ).submit(function( event ) {
      // Если длина значения .required равна нулю
      if ( $( ".required" ).val().length === 0 ) {
        // Обычно здесь показывают какое-то сообщение об ошибке
        // Запретить отправку формы
        event.preventDefault();
      } else {
        // Run $.ajax() here
      }
    });

Давайте посмотрим, как легко проверить наличие недопустимых символов в номере телефона:

    // Проверка поля номера телефона
    $( "#form" ).submit(function( event ) {
      var inputtedPhoneNumber = $( "#phone" ).val();

      // Совпадение только с числами
      var phoneNumberRegex = /^\d*$/;
      // Если номер телефона не соответствует регулярному выражению
      if ( !phoneNumberRegex.test( inputtedPhoneNumber ) ) {
        // Обычно здесь показывают какое-то сообщение об ошибке
        // Запретить отправку формы
        event.preventDefault();
      } else {
        // Run $.ajax() here
      }
    });

## Prefiltering
Предварительный фильтр - это способ изменить параметры ajax перед отправкой каждого запроса (отсюда и название `prefilter`).

Например, предположим, что мы хотели бы модифицировать все междоменные запросы через прокси. Сделать это с предварительным фильтром:

    // Использование прокси с префильтром
    $.ajaxPrefilter(function( options, originalOptions, jqXHR ) {
      if ( options.crossDomain ) {
        options.url = "http://mydomain.net/proxy/" + encodeURIComponent( options.url );
        options.crossDomain = false;
      }
    });

Вы можете передать необязательный аргумент перед функцией обратного вызова, который указывает, к каким типам данных вы хотите применить предварительный фильтр. Например, если мы хотим, чтобы наш предварительный фильтр применялся только к запросам JSON и скриптов, мы должны сделать:

    // Использование необязательного аргумента dataTypes: "json script"
    $.ajaxPrefilter( "json script", function( options, originalOptions, jqXHR ) {
      // Выполните всю предварительную фильтрацию здесь, но только для
      // запросов, чей тип данных "JSON" или "script"
    });
