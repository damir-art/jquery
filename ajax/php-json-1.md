# PHP JSON
https://snipp.ru/php/json-php  

JSON (JavaScript Object Notation) – текстовый формат обмена данными, основанный на JavaScript, который представляет собой набор пар {ключ: значение}. Значение может быть массивом, числом, строкой и булевым значением.

В PHP поддержка JSON появилась с версии 5.2.0 и работает только с кодировкой UTF-8.

## json_encode()
`json_encode($value, $options)` - кодирует массив или объект в JSON.

    $array = array(
      '1' => 'Значение 1', 
      '2' => 'Значение 2', 
      '3' => 'Значение 3', 
      '4' => 'Значение 4', 
      '5' => 'Значение 5'
    );
    
    $json = json_encode($array);
    echo $json;

Кирилические символы выводятся как `\u0417`, поэтому нужно использовать второй параметр `JSON_UNESCAPED_UNICODE`.

    $json = json_encode($array, JSON_UNESCAPED_UNICODE);
    echo $json;

Далее эту строку сохраняем в файл или передаём в браузер (например при запросах):

    header('Content-Type: application/json');
    echo $json;
    exit();

## json_decode()
`json_decode($json)` - декодирование, преобразует строку в объект или массив.

Прелбразовать строку в объект:

    $json = '{"1":"Значение 1","2":"Значение 2","3":"Значение 3","4":"Значение 4","5":"Значение 5"}';
    $a = json_decode($json);

    echo '<pre>';
    print_r($a);
    echo '</pre>';

Прелбразовать строку в массив (добавис вторым аргументом `true`):

    $json = '{"1":"Значение 1","2":"Значение 2","3":"Значение 3","4":"Значение 4","5":"Значение 5"}';
    $a = json_decode($json, true);

    echo '<pre>';
    print_r($a);
    echo '</pre>';

## Получение ошибок и их исправление
json_decode() возвращает NULL, если в объекте есть ошибки, посмотреть их можно с помощью функции json_last_error():

## HTTP-запросы в формате JSON
Некоторые сервисы требуют чтобы запросы к ним осуществлялись в формате JSON, такой запрос можно сформировать в CURL:
