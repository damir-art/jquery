# Style guide JavaScript
Style guide кода JavaScript при использовании библиотеки jQuery.

- Расстояние
  - Плохие примеры
  - Хорошие примеры
  - Выражения объектов и массивов
  - Многострочные операторы
  - Цепные вызовы методов
  - Полное закрытие файлов
- Конструкторы
- Равенство
- Проверка типа
- Комментарии
- Кавычки
- Точки с запятой
- Соглашения об именах
- Глобальные переменные
- Правила узла DOM
- Операторы Switch

## Расстояние
В общем, руководство по стилю jQuery поощряет свободное пространство для улучшения удобочитаемости. В процессе минификации создается файл, оптимизированный для чтения и обработки браузерами.

- Отступ с табами.
- Нет пробелов в конце строки или на пустых строках.
- Строки не должны быть длиннее 80 символов и не должны превышать 100 (считая табуляцию за 4 пробела). Есть 2 исключения, в обоих случаях длина строки превышает 100 символов:
  - Если в строке есть комментарий с длинным URL.
  - Если строка содержит литерал регулярного выражения. Это предотвращает необходимость использования конструктора регулярных выражений, который требует в противном случае ненужного экранирования строки.
- if/else/for/while/try всегда имеют фигурные скобки и всегда располагаются на нескольких строках.
- Унарные операторы со специальными символами (например, !, ++) не должны иметь пробела рядом с операндом.
- Любой `,` и `; `не должно иметь предшествующего пробела.
- Любой `;` используемый в качестве терминатора оператора, должен стоять в конце строки.
- Любой `:` после имени свойства в определении объекта не должно быть предшествующего пробела.
- `?` и `:` в троичном условном выражении должно быть место с обеих сторон.
- Отсутствие пробелов-заполнителей в пустых конструкциях (например, `{}`, `[]`, `fn()`)
- Новая строка в конце каждого файла.
- Если весь файл заключен в замыкание, тело функции не имеет отступа. См. примеры полного закрытия файлов.

### Плохие примеры

    if(condition) doSomething();
    while(!condition) iterating++;
    for(var i=0;i<100;i++) object[array[i]] = someFn(i);

### Хорошие примеры

    var i = 0;

    if ( condition ) {
        doSomething();
    } else if ( otherCondition ) {
        somethingElse();
    } else {
        otherThing();
    }

    while ( !condition ) {
        iterating++;
    }

    for ( ; i < 100; i++ ) {
        object[ array[ i ] ] = someFn( i );
    }

    try {
      // Expressions
    } catch ( e ) {
      // Expressions
    }

    array = [ "*" ];

    array = [ a, b ];

    foo( arg );

    foo( options, object[ property ] );

    foo( [ a, b ], "property", { c: d } );

    foo( { a: "alpha", b: "beta" } );

    foo( [ a, b ] );

    foo( {
        a: "alpha",
        b: "beta"
    } );

    foo( function() {
      // Do stuff
    }, options );

    foo( data, function() {
      // Do stuff
    } );

### Выражения объектов и массивов
Выражения объектов и массивов могут располагаться на одной строке, если они короткие (помните об ограничениях длины строки). Если выражение слишком длинное и не помещается на одной строке, в каждой строке должно быть по одному свойству или элементу, причем открывающая и закрывающая фигурные скобки должны располагаться на отдельных строках. Имена свойств нужно заключать в кавычки только в том случае, если они являются зарезервированными словами или содержат специальные символы:

    // Bad
    map = { ready: 9,
        when: 4, "you are": 15 };
    
    array = [ 9,
        4,
        15 ];
    
    array = [ {
        key: val
    } ];
    
    array = [ {
        key: val
    }, {
        key2: val2
    } ];
    
    // Good
    map = { ready: 9, when: 4, "you are": 15 };
    
    array = [ 9, 4, 15 ];
    
    array = [ { key: val } ];
    
    array = [ { key: val }, { key2: val2 } ];
    
    array = [
        { key: val },
        { key2: val2 }
    ];
    
    // Good as well
    map = {
        ready: 9,
        when: 4,
        "you are": 15
    };
    
    array = [
        9,
        4,
        15
    ];
    
    array = [
        {
            key: val
        }
    ];
    
    array = [
        {
            key: val
        },
        {
            key2: val2
        }
    ];

### Многострочные операторы
Если инструкция слишком длинная и не помещается на одной строке, разрыв строки должен стоять после оператора.

    // Bad
    var html = "<p>The sum of " + a + " and " + b + " plus " + c
        + " is " + ( a + b + c );
    
    // Good
    var html = "<p>The sum of " + a + " and " + b + " plus " + c +
        " is " + ( a + b + c );

Строки должны быть разбиты на логические группы, если это улучшает читабельность, например, разделение каждого выражения тернарного оператора на отдельную строку, даже если оба они помещаются на одной строке.

    var baz = firstCondition( foo ) && secondCondition( bar ) ?
        qux( foo, bar ) :
        foo;

Если условное выражение слишком длинное и не помещается на одной строке, последующие строки должны иметь отступ на один дополнительный уровень, чтобы отличить их от основного текста.

    if ( firstCondition() && secondCondition() &&
            thirdCondition() ) {
        doStuff();
    }

### Цепные вызовы методов
Когда цепочка вызовов методов слишком длинная, чтобы уместиться в одной строке, в каждой строке должен быть один вызов, при этом первый вызов должен быть в отдельной строке от объекта, для которого вызываются методы. Если метод изменяет контекст, необходимо использовать дополнительный уровень отступа.

    elements
        .addClass( "foo" )
        .children()
            .html( "hello" )
        .end()
        .appendTo( "body" );

### Полное закрытие файлов
Когда весь файл заключен в замыкание, тело замыкания не имеет отступа.

    ( function( $ ) {
    
      // This doesn't get indented
    
    } )( jQuery );

## Конструкторы
Функции-конструкторы всегда следует вызывать со списками аргументов, даже если такие списки пусты.

    throw new Error();
    when = time || new Date();

Когда доступ к свойству или вызов метода выполняется немедленно для результата функции-конструктора, уточняйте приоритет с помощью круглых скобок.

    detachedMode = ( new TemplateFactory( settings ) ).nodeType === 11;
    match = ( new RegExp( pattern ) ).exec( input );

## Равенство
Вместо абстрактных проверок на равенство `(==)` необходимо использовать строгие проверки на равенство `(===)`. Единственным исключением является проверка на `undefined` и `null` посредством `null`. Использование `== null` также допустимо в тех случаях, когда логически может встречаться только одно из значений `null` или `undefined`, например, неинициализированные переменные.

    // Check for both undefined and null values, for some important reason.
    undefOrNull == null;

## Проверка типа
- String: `typeof object === "string"`
- Number: `typeof object === "number"`
- Boolean: `typeof object === "boolean"`
- Object: `typeof object === "object"`
- Plain Object: `jQuery.isPlainObject( object )`
- Function: `jQuery.isFunction( object )`
- Array: `jQuery.isArray( object )`
- Element: `object.nodeType`
- null: `object === null`
- null or undefined: `object == null`
- undefined:
  - Global Variables: `typeof variable === "undefined"`
  - Local Variables: `variable === undefined`
  - Properties: `object.prop === undefined`

## Комментарии
Комментариям всегда предшествует пустая строка. Комментарии начинаются с заглавной буквы, но не требуют точки в конце, если только вы не пишете полные предложения. Между токеном комментария и текстом комментария должен быть один пробел.

Однострочные комментарии располагаются над строкой, на которую они ссылаются:

    // We need an explicit "bar", because later in the code foo is checked.
    var foo = "bar";
    
    // Even long comments that span
    // multiple lines use the single
    // line comment form.

Многострочные комментарии используются только для заголовков файлов и функций.

В качестве исключения разрешены встроенные комментарии, когда они используются для аннотирования специальных аргументов в списках формальных параметров или когда это необходимо для поддержки определенного инструмента разработки:

    function foo( types, selector, data, fn, /* INTERNAL */ one ) {
    
        // Do stuff
    }

## Кавычки
jQuery использует двойные кавычки.

    var double = "I am wrapped in double quotes";

Строки, требующие внутренних кавычек, должны использовать двойные внешние и одинарные внутренние кавычки.

    var html = "<div id='my-id'></div>";

## Точки с запятой
Используй их. Никогда не полагайтесь на ASI.

## Соглашения об именах
Имена переменных и функций должны быть полными словами, в верблюжьем регистре со строчной первой буквой. Имена должны быть описательными, но не чрезмерно. Для итераторов допускаются исключения, например использование `i` для представления индекса в цикле. Конструкторы не нуждаются в заглавной первой букве.

## Глобальные переменные
Каждый проект может предоставлять не более одной глобальной переменной.

## Правила узла DOM
`.nodeName` всегда должно использоваться вместо `.tagName`. `.nodeType` должен использоваться для определения классификации узла (не `.nodeName`).

## Операторы Switch
Использование операторов `switch`, как правило, не рекомендуется, но может быть полезным, когда имеется большое количество `case`, особенно когда несколько `case` могут обрабатываться одним и тем же блоком, или можно использовать логику пропуска (default case).

При использовании операторов `switch`:
- Используйте `break` для каждого `case`, кроме значения `default`.
- Выровняйте операторы `case` со `switch`.

Пример:

    switch ( event.keyCode ) {
    case $.ui.keyCode.ENTER:
    case $.ui.keyCode.SPACE:
        x();
        break;
    case $.ui.keyCode.ESCAPE:
        y();
        break;
    default:
        z();
    }
