# Выпущен jQuery 3.6.3: исправление быстрых селекторов
Опубликовано 20 декабря 2022 г. Тимми Уиллисон

На прошлой неделе мы выпустили jQuery 3.6.2. В этом релизе было несколько изменений, но самое важное касалось проблемы с некоторыми новыми селекторами, представленными в большинстве браузеров, такими как `:has()`. Мы хотели выпустить jQuery 3.6.3 как можно скорее, потому что сообщалось об ошибке, которая выявила проблему с нашим исходным исправлением. Подробнее об этом ниже.

Как обычно, релиз доступен на нашем CDN и в менеджере пакетов npm. Другие сторонние CDN, вероятно, также скоро получат его, но помните, что мы не контролируем их графики выпуска, и им потребуется некоторое время. Вот основные моменты для jQuery 3.6.3.

## Правильное использование CSS.supports
После того, как проблема с `:has` была исправлена в jQuery 3.6.2, мы начали использовать `CSS.supports("selector(SELECTOR)")`, чтобы определить, будет ли селектор действительным, если он будет передан непосредственно в `querySelectorAll`. Когда `CSS.supports` возвращал `false`, jQuery возвращался к своему собственному механизму выбора (Sizzle). Судя по всему, в нашей реализации была ошибка. В `CSS.supports("selector(SELECTOR)")` SELECTOR должен быть `<complex-selector>`, а не `<complex-selector-list>`.

Например:

    CSS.supports("селектор(div)"); // true
    CSS.supports("селектор(div, span)"); // false

Это означало, что все сложные списки селекторов передавались через Sizzle вместо `querySelectorAll`. В большинстве случаев это не обязательно проблема, но это означает, что некоторые селекторы уровня 4, которые поддерживались в браузерах, но не в Sizzle, например `:valid`, больше не работали, если они были частью списка селекторов (например, `input:valid, div`). Следует отметить, что в настоящее время это влияет только на Firefox, но это будет верно для всех браузеров, поскольку они внедряют изменения в `CSS.supports`.

Теперь это исправлено в jQuery 3.6.3, и это единственное функциональное изменение в этом выпуске.

## Обновление
Мы не ожидаем проблем с совместимостью при обновлении с версии jQuery 3.0+. Для обновления ознакомьтесь с новым Руководством по обновлению 3.5. Если вы еще не обновились до jQuery 3+, сначала ознакомьтесь с Руководством по обновлению до версии 3.0.

Плагин jQuery Migrate поможет вам определить проблемы совместимости в вашем коде. Пожалуйста, попробуйте эту новую версию и сообщите нам о любых проблемах, с которыми вы столкнулись.

Если вы еще не можете обновиться до версии 3.5+, Даниэль Руф любезно предоставил исправления для предыдущих версий jQuery.

## Скачать
Вы можете получить файлы из CDN jQuery или напрямую связать их:

- https://code.jquery.com/jquery-3.6.3.js
- https://code.jquery.com/jquery-3.6.3.min.js

Вы также можете получить этот релиз от npm:

    npm install jquery@3.6.3

### Slim build
Иногда вам не нужен ajax или вы предпочитаете использовать одну из множества автономных библиотек, ориентированных на запросы ajax. И часто проще использовать комбинацию CSS и манипулирования классами для веб-анимации. Наряду с обычной версией jQuery, включающей модули ajax и эффекты, мы выпустили "тонкую" `(slim)` версию, в которой эти модули исключены. В наши дни размер jQuery очень редко влияет на производительность загрузки, но тонкая сборка примерно на 6 КБ в сжатом виде меньше, чем обычная версия. Эти файлы также доступны в пакете npm и в CDN:

- https://code.jquery.com/jquery-3.6.3.slim.js
- https://code.jquery.com/jquery-3.6.3.slim.min.js

Эти обновления уже доступны в виде текущих версий на npm и Bower. Информация обо всех способах получения jQuery доступна по адресу https://jquery.com/download/. Публичные CDN получат свои копии сегодня, пожалуйста, дайте им несколько дней, чтобы опубликовать файлы. Если вам не терпится быстро приступить к работе, используйте файлы в нашем CDN, пока они не обновятся.

## Спасибо
Спасибо всем, кто участвовал в этом выпуске, отправляя исправления, сообщая об ошибках или тестируя, включая Михала Голебиовски-Овчарека и всю команду jQuery.

## Список изменений
Полный журнал изменений: 3.6.3

### Build
- удалить устаревший пакет Insight из пользовательских сборок (81d5bd17)
- Обновление стабильной версии 3.x до 3.6.3-pre. (2c5b47c4)

### Selector
- Обновление Sizzle с 2.3.8 до 2.3.9 (#5177, 8989500e)
